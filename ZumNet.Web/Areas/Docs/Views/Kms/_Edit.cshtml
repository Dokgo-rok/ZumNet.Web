@using Newtonsoft.Json;
@using ZumNet.Framework.Util;

@{
    bool bPrevEditorBody = false;
}

<!-- Header -->
<div class="flex-grow-0">
    <div class="zf-menu d-flex justify-content-between container-p-x m-0 @(ViewBag.R.wnd.ToString() == "" ? "mt-1 pt-3" : "py-2")" style="@(ViewBag.R.wnd.ToString() == "" ? "padding-bottom: .65rem !important" : "")">
        <div class="d-flex align-items-center font-weight-bold">
            @if (ViewBag.R.wnd.ToString() == "")
            {
                <div class="h5 mb-0">
                    <a href="javascript:void(0)" class="messages-sidebox-toggler d-none d-md-block d-lg-none align-self-center px-2 mr-3" data-toggle="modal" data-target=".messages-sidebox"><i class="fe-more-vertical"></i></a>
                </div>
            }

        <div class="btn-group">
            <button class="btn btn-default font-weight-bold" data-toggle="tooltip" data-placement="bottom" title="@Resources.Global.Register" onclick="_zw.mu.registerMsg();"><i class="fas fa-arrow-right text-primary"></i><span class="d-none d-sm-inline-block ml-1">@Resources.Global.Register</span></button>
            <button class="btn btn-default font-weight-bold" data-toggle="tooltip" data-placement="bottom" title="@Resources.Global.Preview" onclick="_zw.mu.previewMsg();"><i class="fe-printer"></i><span class="d-none d-sm-inline-block ml-1">@Resources.Global.Preview</span></button>
            @if (ViewBag.R.app.state == '0')
            {
                <button class="btn btn-default font-weight-bold" data-toggle="tooltip" data-placement="bottom" title="@Resources.Global.TempSave" onclick="_zw.mu.saveMsg();"><i class="fe-save"></i><span class="d-none d-sm-inline-block ml-1">@Resources.Global.TempSave</span></button>
            }
        </div>
        </div>
        <div>
            <div class="btn-group">
                <button class="btn btn-default" data-toggle="tooltip" data-placement="bottom" title="@Resources.Global.EditorExpand" data-zf-menu="toggleEditor" aria-expanded="false"><i class="fe-arrow-up"></i></button>
                <button class="btn btn-default" data-toggle="tooltip" data-placement="bottom" title="@Resources.Global.Cancel" onclick="_zw.mu.cancelMsg();"><i class="fe-log-out"></i></button>
            </div>
        </div>
    </div>
</div>
<!-- / Header -->

<div class="flex-grow-1@(ViewBag.R.wnd.ToString() == "" ? " position-relative" : "")" style="border-top: 2px solid #eee">
    <div class="z-list-scroll" style="@(ViewBag.R.wnd.ToString() == "" ? "" : "top: 48px")">
        <div class="">
            <div class="container-p-x mt-2">
                <div class="form-group row mb-1">
                    <div class="col-form-label col-sm-2">
                        <span>@Resources.Global.Knowledge @Resources.Global.Classification</span>
                        <button class="zf-btn-sm btn btn-default float-right" data-toggle="tooltip" data-placement="bottom" title="@Resources.Global.Select" data-zf-menu="openClassWnd"><i class="fe-search"></i></button>
                    </div>
                    <div class="col-sm-10">
                        <input type="text" data-for="SelectedFolderPath" class="form-control" placeholder="@Resources.Global.Knowledge @Resources.Global.Classification" readonly value="@(ViewBag.SiteMap != null && ViewBag.SiteMap.ToString() != "" ? ViewBag.R.ttl : "")">
                        <input type="hidden" data-for="SelectedFolder" value="@ViewBag.R.fdid" />
                        <input type="hidden" data-for="SelectedXFAlias" value="@ViewBag.R.xfalias" />
                    </div>
                </div>

                <div class="form-group row mb-1">
                    <div class="col-form-label col-sm-2">
                        <span>지식 공유자</span>
                        <button class="zf-btn-sm btn btn-default float-right" data-toggle="tooltip" data-placement="bottom" title="@Resources.Global.Select" onclick="_zw.fn.org('user', 'y');"><i class="fe-search"></i></button>
                    </div>
                    <div class="col-sm-10">
                        <ul class="nav border rounded px-1 pb-1" style="height: 2.075rem; overflow: auto" data-for="CoRegList">
                            @if (Convert.ToInt32(ViewBag.R.app["coregcount"]) > 0)
                            {
                                foreach (var j in ViewBag.R.app.coreglist)
                                {
                                    <li class="nav-item bg-info rounded d-flex align-items-center pl-2 pr-1 mt-1 mr-1" data-val="_@j["acttype"]_@j["actorid"]">
                                        <a class="text-white" href="javascript:void(0)" onclick="_zw.fn.viewUserSimpleInfo('@j["actorid"]');">@j["actordept"] [@j["actorgrade"]] @j["actor"]</a>
                                        <button class="btn btn-sm btn-18 ml-2 text-white"><span aria-hidden="true">×</span></button>
                                    </li>
                                }
                            }
                        </ul>
                    </div>
                </div>

                <div class="form-group row mb-1">
                    <div class="col-form-label col-sm-2">@Resources.Global.Subject</div>
                    <div class="col-sm-10">
                        <input type="text" id="txtSubject" class="form-control" placeholder="@Resources.Global.Subject" value="@ViewBag.R.app["subject"]">
                    </div>
                </div>

                <div class="form-inline row mb-1">
                    <div class="col-form-label col-sm-2">@Resources.Global.Writer</div>
                    <div class="col-sm-10">
                        <input type="text" class="form-control w-100" readonly value="@ViewBag.R.current.user / @ViewBag.R.current.dept / @ZumNet.Web.Bc.CommonUtils.LvDate(ViewBag.R.app["pubdate"].ToString(), true)">
                    </div>
                </div>

                <div class="form-group row mb-0">
                    <div class="col-form-label col-sm-2">
                        <span>@Resources.Global.AttachFile</span>
                        @*<button class="zf-btn-sm btn btn-default float-right" data-toggle="tooltip" data-placement="bottom" title="@Resources.Global.UploaderFold" data-zf-menu="toggleUploader" aria-expanded="false"><i class="fe-chevron-up"></i></button>*@
                    </div>
                    <div class="col-sm-10">
                        <div class="zf-uploader" id="__DextUpload"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="container-p-x py-2 zf-editor position-absolute" id="__DextEditor" style="top: ; bottom: 0; left: 0; right: 0; min-height: 50%"></div>
    </div>
</div>
