@using System.Data;

@{
    string sDel = "/";
    string[,] userBox =
    {
        //node, location, name, count여부, bold여부, basesort, basesoft명
        { "node.do", "do" + sDel + "" + sDel + Session["URID"].ToString(), Resources.EA.BoxToDo, "Y", "Y", "ReqDate", "요청일자" },
        { "node.ep", "ep" + sDel + "" + sDel + Session["URID"].ToString(), Resources.EA.BoxExpected, "Y", "Y", "PIStart", "기안일자" },
        { "node.wt", "wt" + sDel + "" + sDel + Session["URID"].ToString(), Resources.EA.BoxWaiting, "", "", "CreateDate", "보낸일자" },
        { "node.av", "av" + sDel + "" + sDel + Session["URID"].ToString(), Resources.EA.BoxToApprove, "Y", "Y", "ReceivedDate", "받은일자" },
        { "node.go", "go" + sDel + "" + sDel + Session["URID"].ToString(), Resources.EA.BoxInProcess, "Y", "Y", "CompletedDate", "결재일자" },
        { "node.cf", "cf" + sDel + "_cf" + sDel + Session["URID"].ToString(), Resources.EA.BoxToConfirm, "Y", "", "ReceivedDate", "받은일자" },
        { "node.dl", "dl" + sDel + "_dl" + sDel + Session["URID"].ToString(), Resources.EA.BoxDistribued, "Y", "", "ReceivedDate", "받은일자" },
        { "node.cm", "cm" + sDel + "" + sDel + Session["URID"].ToString(), Resources.EA.BoxCompleted, "", "", "CompletedDate", "결재일자" },
        { "node.rj", "rj" + sDel + "" + sDel + Session["URID"].ToString(), Resources.EA.BoxRejected, "Y", "", "CompletedDate", "반려일자" },
        { "node.ps", "ps" + sDel + "" + sDel + Session["URID"].ToString(), Resources.EA.BoxViewLater, "", "", "ReceivedDate", "받은일자" },
        { "node.re", "re" + sDel + "" + sDel + Session["URID"].ToString(), Resources.EA.BoxReference, "Y", "", "ReceivedDate", "받은일자" },
        { "node.wd", "wd" + sDel + "" + sDel + Session["URID"].ToString(), Resources.EA.BoxWithdrawn, "", "", "PIEnd", "회수일자" },
        { "node.te", "te" + sDel + "" + sDel + Session["URID"].ToString(), Resources.EA.BoxSaved, "", "", "CreateDate", "작성일자" }
    };

    string[,] deptBox =
    {
        { "node.as", "as" + sDel + "__r" + sDel + Session["DeptID"].ToString() + "__r", Resources.EA.BoxAssigned, "Y", "Y", "ReceivedDate", "받은일자" },
        { "node.__r", "__r" + sDel + "__r" + sDel + Session["DeptID"].ToString() + "__r", Resources.EA.BoxReceived, "Y", "Y", "ReceivedDate", "접수일자" },
        { "node._s", "_s" + sDel + "_s" + sDel + Session["DeptID"].ToString() + "_s", Resources.EA.BoxSent, "", "", "CompletedDate", "발신일자" },
        { "node._a", "_a" + sDel + "_a" + sDel + Session["DeptID"].ToString() + "_a", Resources.EA.BoxCompleted, "", "", "PIEnd", "완료일자" },
        { "node._re", "_re" + sDel + "_re" + sDel + Session["DeptID"].ToString() + "_re", Resources.EA.BoxReference, "Y", "", "ReceivedDate", "접수일자" },
        { "node._dl", "dl" + sDel + "_dl" + sDel + Session["DeptID"].ToString() + "_dl", Resources.EA.BoxDistribued, "Y", "", "ReceivedDate", "접수일자" }
    };

    //ViewBag.R.opnode = "_a/_a/1355_a"; //"ep" + sDel + "" + sDel + Session["URID"].ToString();

}
<ul class="sidenav-inner">

    <li class="sidenav-item" data-box="node.do" data-location="@userBox[0, 1]">
        <a href="javascript:void(0)" class="sidenav-link font-weight-bold"><i class="fe-check-square sidenav-icon"></i><span>@userBox[0, 2]</span><span class="z-lm-cnt"></span></a>
    </li>
    <li class="sidenav-item active open">
        <a href="javascript:void(0)" class="sidenav-link font-weight-bold sidenav-toggle"><i class="fe-user-check sidenav-icon"></i><span>@Session["URName"] @Resources.EA.Box</span></a>

        <ul class="sidenav-menu my-0">
            @for (int i = 1; i < userBox.GetLength(0); i++)
            {
                if (userBox[i, 0] != "node.wt" || (userBox[i, 0] == "node.wt" && Session["FlowSvcMode"] != null && Session["FlowSvcMode"].ToString().Substring(0, 1) == "Y"))
                {
                    <li class="sidenav-item@(userBox[i, 4] == "Y" ? " font-weight-bold" : "")@(ViewBag.R["opnode"] == userBox[i, 1] ? " active" : "")" data-box="@userBox[i, 0]" data-location="@userBox[i, 1]">
                        <a href="javascript:void(0)" class="sidenav-link">
                            <span>@userBox[i, 2]</span>
                            @if (userBox[i, 3] == "Y")
                            {
                                <span class="z-lm-cnt"></span>
                            }
                        </a>
                    </li>
                }
            }            
        </ul>
    </li>
    <li class="sidenav-item active open">
        <a href="javascript:void(0)" class="sidenav-link font-weight-bold sidenav-toggle"><i class="fe-users sidenav-icon"></i><span>@Session["DeptName"] @Resources.EA.Box</span></a>

        <ul class="sidenav-menu my-0">
            @for (int i = 0; i < deptBox.GetLength(0); i++)
            {
                if ((deptBox[i, 0] == "node.as" && ViewBag.FormCharger)
                    || (deptBox[i, 0] == "node.__r" && (ViewBag.RcvManager || ViewBag.R.current["operator"].ToString() == "Y"))
                    || deptBox[i, 0] != "node.as" || deptBox[i, 0] != "node.__r")
                {
                    <li class="sidenav-item@(deptBox[i, 4] == "Y" ? " font-weight-bold" : "")@(ViewBag.R["opnode"] == deptBox[i, 1] ? " active" : "")" data-box="@deptBox[i, 0]" data-location="@deptBox[i, 1]">
                        <a href="javascript:void(0)" class="sidenav-link">
                            <span>@deptBox[i, 2]</span>
                            @if (deptBox[i, 3] == "Y")
                            {
                                <span class="z-lm-cnt"></span>
                            }
                        </a>
                    </li>
                }
            }
        </ul>
    </li>
    @if (ViewBag.SharedFolder != null && ViewBag.SharedFolder.Count > 0)
    {
        <li class="sidenav-item active open">
            <a href="javascript:void(0)" class="sidenav-link font-weight-bold sidenav-toggle"><i class="fab fa-chromecast sidenav-icon text-pink"></i><span>@Resources.EA.BoxShared</span></a>

            <ul class="sidenav-menu my-0">
                @foreach (DataRow row in ViewBag.SharedFolder)
                {
                    <li class="sidenav-item@(ViewBag.R["opnode"].Value.IndexOf(row["TargetGRID"].ToString()) > 0 ? " active open" : "")">
                        <a href="javascript:void(0)" class="sidenav-link sidenav-toggle"><i class="far fa-folder sidenav-icon text-secondary"></i><span>@row["TargetGR"]</span></a>

                        <ul class="sidenav-menu my-0">
                            <li class="sidenav-item@(ViewBag.R["opnode"].Value.IndexOf(row["TargetGRID"].ToString() + "_s") > 0 ? " active" : "")" data-box="node._s" data-location="@("_s" + sDel + "_s" + sDel + row["TargetGRID"].ToString() + "_s")">
                                <a href="javascript:void(0)" class="sidenav-link"><span>@Resources.EA.BoxSent</span></a>
                            </li>
                            <li class="sidenav-item@(ViewBag.R["opnode"].Value.IndexOf(row["TargetGRID"].ToString() + "_a") > 0 ? " active" : "")" data-box="node._a" data-location="@("_a" + sDel + "_a" + sDel + row["TargetGRID"].ToString() + "_a")">
                                <a href="javascript:void(0)" class="sidenav-link"><span>@Resources.EA.BoxCompleted</span></a>
                            </li>
                            <li class="sidenav-item@(ViewBag.R["opnode"].Value.IndexOf(row["TargetGRID"].ToString() + "_re") > 0 ? " active" : "")" data-box="node._re" data-location="@("_re" + sDel + "_re" + sDel + row["TargetGRID"].ToString() + "_re")">
                                <a href="javascript:void(0)" class="sidenav-link"><span>@Resources.EA.BoxReference</span></a>
                            </li>
                            <li class="sidenav-item@(ViewBag.R["opnode"].Value.IndexOf(row["TargetGRID"].ToString() + "_dl") > 0 ? " active" : "")" data-box="node._dl" data-location="@("dl" + sDel + "_dl" + sDel + row["TargetGRID"].ToString() + "_dl")">
                                <a href="javascript:void(0)" class="sidenav-link"><span>@Resources.EA.BoxDistribued</span></a>
                            </li>
                        </ul>
                    </li>
                }
            </ul>
        </li>
    }

</ul>


